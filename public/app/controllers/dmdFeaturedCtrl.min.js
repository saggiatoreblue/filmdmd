dmdApp.controller("dmdFeaturedCtrl",function(a,b,g,f,d,e){if(d.currentUser){a.rejects=d.currentUser.rejects;a.watched=d.currentUser.watched}c();function c(){var h=true;g.getFeatured().then(function(i){angular.forEach(a.rejects,function(j,k){if(i.id===j){h=false}});angular.forEach(a.watched,function(j,k){if(i.id===j){h=false}});if(h){b.filmId=i.id;b.title=i.title;b.synopsis=i.overview;b.image="https://image.tmdb.org/t/p/w396/"+i.poster_path;b.rating=i.vote_average}},function(i){e.error(i)})}b.reload=function(){c()};b.reject=function(){f.addReject(b.filmId).then(function(){e.notify(b.title+" has been added to your do not watch list!");a.rejects=d.currentUser.rejects;a.$broadcast("rootScope:rejectAdded",{});c()},function(h){e.error(h)})};b.later=function(){f.addLater(b.filmId).then(function(){e.notify(b.title+" has been saved!");a.later=d.currentUser.later;a.$broadcast("rootScope:laterAdded",{});c()},function(h){e.error(h)})};b.watched=function(){f.addWatched(b.filmId).then(function(){e.notify(b.title+" has been added to your list of films already watched!");a.watched=d.currentUser.watched;a.$broadcast("rootScope:watchedAdded",{});c()},function(h){e.error(h)})}});