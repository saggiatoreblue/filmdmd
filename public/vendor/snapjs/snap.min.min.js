(function(f,d){var e=e||function(a){var n={element:null,dragger:null,disable:"none",addBodyClasses:true,hyperextensible:true,resistance:0.5,flickThreshold:50,transitionSpeed:0.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:true,touchToDrag:true,slideIntent:40,minDragDistance:5},o={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},l={},p={hasTouch:("ontouchstart" in d.documentElement||f.navigator.msPointerEnabled),eventType:function(g){var h={down:(p.hasTouch?"touchstart":"mousedown"),move:(p.hasTouch?"touchmove":"mousemove"),up:(p.hasTouch?"touchend":"mouseup"),out:(p.hasTouch?"touchcancel":"mouseout")};return h[g]},page:function(h,g){return(p.hasTouch&&g.touches.length&&g.touches[0])?g.touches[0]["page"+h]:g["page"+h]},klass:{has:function(g,h){return(g.className).indexOf(h)!==-1},add:function(g,h){if(!p.klass.has(g,h)&&n.addBodyClasses){g.className+=" "+h}},remove:function(g,h){if(n.addBodyClasses){g.className=(g.className).replace(h,"").replace(/^\s+|\s+$/g,"")}}},dispatchEvent:function(g){if(typeof l[g]==="function"){return l[g].call()}},vendor:function(){var g=d.createElement("div"),i="webkit Moz O ms".split(" "),h;for(h in i){if(typeof g.style[i[h]+"Transition"]!=="undefined"){return i[h]}}},transitionCallback:function(){return(o.vendor==="Moz"||o.vendor==="ms")?"transitionend":o.vendor+"TransitionEnd"},canTransform:function(){return typeof n.element.style[o.vendor+"Transform"]!=="undefined"},deepExtend:function(h,i){var g;for(g in i){if(i[g]&&i[g].constructor&&i[g].constructor===Object){h[g]=h[g]||{};p.deepExtend(h[g],i[g])}else{h[g]=i[g]}}return h},angleOfDrag:function(h,i){var j,g;g=Math.atan2(-(o.startDragY-i),(o.startDragX-h));if(g<0){g+=2*Math.PI}j=Math.floor(g*(180/Math.PI)-180);if(j<0&&j>-180){j=360-Math.abs(j)}return Math.abs(j)},events:{addEvent:function m(g,h,i){if(g.addEventListener){return g.addEventListener(h,i,false)}else{if(g.attachEvent){return g.attachEvent("on"+h,i)}}},removeEvent:function m(g,h,i){if(g.addEventListener){return g.removeEventListener(h,i,false)}else{if(g.attachEvent){return g.detachEvent("on"+h,i)}}},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}}},parentUntil:function(i,h){var g=typeof h==="string";while(i.parentNode){if(g&&i.getAttribute&&i.getAttribute(h)){return i}else{if(!g&&i===h){return i}}i=i.parentNode}return null}},c={translate:{get:{matrix:function(i){if(!p.canTransform()){return parseInt(n.element.style.left,10)}else{var g=f.getComputedStyle(n.element)[o.vendor+"Transform"].match(/\((.*)\)/),h=8;if(g){g=g[1].split(",");if(g.length===16){i+=h}return parseInt(g[i],10)}return 0}}},easeCallback:function(){n.element.style[o.vendor+"Transition"]="";o.translation=c.translate.get.matrix(4);o.easing=false;clearInterval(o.animatingInterval);if(o.easingTo===0){p.klass.remove(d.body,"snapjs-right");p.klass.remove(d.body,"snapjs-left")}p.dispatchEvent("animated");p.events.removeEvent(n.element,p.transitionCallback(),c.translate.easeCallback)},easeTo:function(g){if(!p.canTransform()){o.translation=g;c.translate.x(g)}else{o.easing=true;o.easingTo=g;n.element.style[o.vendor+"Transition"]="all "+n.transitionSpeed+"s "+n.easing;o.animatingInterval=setInterval(function(){p.dispatchEvent("animating")},1);p.events.addEvent(n.element,p.transitionCallback(),c.translate.easeCallback);c.translate.x(g)}if(g===0){n.element.style[o.vendor+"Transform"]=""}},x:function(g){if((n.disable==="left"&&g>0)||(n.disable==="right"&&g<0)){return}if(!n.hyperextensible){if(g===n.maxPosition||g>n.maxPosition){g=n.maxPosition}else{if(g===n.minPosition||g<n.minPosition){g=n.minPosition}}}g=parseInt(g,10);if(isNaN(g)){g=0}if(p.canTransform()){var h="translate3d("+g+"px, 0,0)";n.element.style[o.vendor+"Transform"]=h}else{n.element.style.width=(f.innerWidth||d.documentElement.clientWidth)+"px";n.element.style.left=g+"px";n.element.style.right=""}}},drag:{listen:function(){o.translation=0;o.easing=false;p.events.addEvent(n.element,p.eventType("down"),c.drag.startDrag);p.events.addEvent(n.element,p.eventType("move"),c.drag.dragging);p.events.addEvent(n.element,p.eventType("up"),c.drag.endDrag)},stopListening:function(){p.events.removeEvent(n.element,p.eventType("down"),c.drag.startDrag);p.events.removeEvent(n.element,p.eventType("move"),c.drag.dragging);p.events.removeEvent(n.element,p.eventType("up"),c.drag.endDrag)},startDrag:function(j){var g=j.target?j.target:j.srcElement,h=p.parentUntil(g,"data-snap-ignore");if(h){p.dispatchEvent("ignore");return}if(n.dragger){var i=p.parentUntil(g,n.dragger);if(!i&&(o.translation!==n.minPosition&&o.translation!==n.maxPosition)){return}}p.dispatchEvent("start");n.element.style[o.vendor+"Transition"]="";o.isDragging=true;o.hasIntent=null;o.intentChecked=false;o.startDragX=p.page("X",j);o.startDragY=p.page("Y",j);o.dragWatchers={current:0,last:0,hold:0,state:""};o.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(D){if(o.isDragging&&n.touchToDrag){var A=p.page("X",D),B=p.page("Y",D),C=o.translation,j=c.translate.get.matrix(4),k=A-o.startDragX,i=j>0,h=k,z;if((o.intentChecked&&!o.hasIntent)){return}if(n.addBodyClasses){if((j)>0){p.klass.add(d.body,"snapjs-left");p.klass.remove(d.body,"snapjs-right")}else{if((j)<0){p.klass.add(d.body,"snapjs-right");p.klass.remove(d.body,"snapjs-left")}}}if(o.hasIntent===false||o.hasIntent===null){var x=p.angleOfDrag(A,B),y=(x>=0&&x<=n.slideIntent)||(x<=360&&x>(360-n.slideIntent)),g=(x>=180&&x<=(180+n.slideIntent))||(x<=180&&x>=(180-n.slideIntent));if(!g&&!y){o.hasIntent=false}else{o.hasIntent=true}o.intentChecked=true}if((n.minDragDistance>=Math.abs(A-o.startDragX))||(o.hasIntent===false)){return}p.events.prevent(D);p.dispatchEvent("drag");o.dragWatchers.current=A;if(o.dragWatchers.last>A){if(o.dragWatchers.state!=="left"){o.dragWatchers.state="left";o.dragWatchers.hold=A}o.dragWatchers.last=A}else{if(o.dragWatchers.last<A){if(o.dragWatchers.state!=="right"){o.dragWatchers.state="right";o.dragWatchers.hold=A}o.dragWatchers.last=A}}if(i){if(n.maxPosition<j){z=(j-n.maxPosition)*n.resistance;h=k-z}o.simpleStates={opening:"left",towards:o.dragWatchers.state,hyperExtending:n.maxPosition<j,halfway:j>(n.maxPosition/2),flick:Math.abs(o.dragWatchers.current-o.dragWatchers.hold)>n.flickThreshold,translation:{absolute:j,relative:k,sinceDirectionChange:(o.dragWatchers.current-o.dragWatchers.hold),percentage:(j/n.maxPosition)*100}}}else{if(n.minPosition>j){z=(j-n.minPosition)*n.resistance;h=k-z}o.simpleStates={opening:"right",towards:o.dragWatchers.state,hyperExtending:n.minPosition>j,halfway:j<(n.minPosition/2),flick:Math.abs(o.dragWatchers.current-o.dragWatchers.hold)>n.flickThreshold,translation:{absolute:j,relative:k,sinceDirectionChange:(o.dragWatchers.current-o.dragWatchers.hold),percentage:(j/n.minPosition)*100}}}c.translate.x(h+C)}},endDrag:function(g){if(o.isDragging){p.dispatchEvent("end");var h=c.translate.get.matrix(4);if(o.dragWatchers.current===0&&h!==0&&n.tapToClose){p.dispatchEvent("close");p.events.prevent(g);c.translate.easeTo(0);o.isDragging=false;o.startDragX=0;return}if(o.simpleStates.opening==="left"){if((o.simpleStates.halfway||o.simpleStates.hyperExtending||o.simpleStates.flick)){if(o.simpleStates.flick&&o.simpleStates.towards==="left"){c.translate.easeTo(0)}else{if((o.simpleStates.flick&&o.simpleStates.towards==="right")||(o.simpleStates.halfway||o.simpleStates.hyperExtending)){c.translate.easeTo(n.maxPosition)}}}else{c.translate.easeTo(0)}}else{if(o.simpleStates.opening==="right"){if((o.simpleStates.halfway||o.simpleStates.hyperExtending||o.simpleStates.flick)){if(o.simpleStates.flick&&o.simpleStates.towards==="right"){c.translate.easeTo(0)}else{if((o.simpleStates.flick&&o.simpleStates.towards==="left")||(o.simpleStates.halfway||o.simpleStates.hyperExtending)){c.translate.easeTo(n.minPosition)}}}else{c.translate.easeTo(0)}}}o.isDragging=false;o.startDragX=p.page("X",g)}}}},b=function(g){if(g.element){p.deepExtend(n,g);o.vendor=p.vendor();c.drag.listen()}};this.open=function(g){p.dispatchEvent("open");p.klass.remove(d.body,"snapjs-expand-left");p.klass.remove(d.body,"snapjs-expand-right");if(g==="left"){o.simpleStates.opening="left";o.simpleStates.towards="right";p.klass.add(d.body,"snapjs-left");p.klass.remove(d.body,"snapjs-right");c.translate.easeTo(n.maxPosition)}else{if(g==="right"){o.simpleStates.opening="right";o.simpleStates.towards="left";p.klass.remove(d.body,"snapjs-left");p.klass.add(d.body,"snapjs-right");c.translate.easeTo(n.minPosition)}}};this.close=function(){p.dispatchEvent("close");c.translate.easeTo(0)};this.expand=function(h){var g=f.innerWidth||d.documentElement.clientWidth;if(h==="left"){p.dispatchEvent("expandLeft");p.klass.add(d.body,"snapjs-expand-left");p.klass.remove(d.body,"snapjs-expand-right")}else{p.dispatchEvent("expandRight");p.klass.add(d.body,"snapjs-expand-right");p.klass.remove(d.body,"snapjs-expand-left");g*=-1}c.translate.easeTo(g)};this.on=function(h,g){l[h]=g;return this};this.off=function(g){if(l[g]){l[g]=false}};this.enable=function(){p.dispatchEvent("enable");c.drag.listen()};this.disable=function(){p.dispatchEvent("disable");c.drag.stopListening()};this.settings=function(g){p.deepExtend(n,g)};this.state=function(){var h,g=c.translate.get.matrix(4);if(g===n.maxPosition){h="left"}else{if(g===n.minPosition){h="right"}else{h="closed"}}return{state:h,info:o.simpleStates}};b(a)};if((typeof module!=="undefined")&&module.exports){module.exports=e}if(typeof ender==="undefined"){this.Snap=e}if((typeof define==="function")&&define.amd){define("snap",[],function(){return e})}}).call(this,window,document);